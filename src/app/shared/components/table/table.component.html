<div class="table-container">
  <table class="table">
    <thead>
      <tr>
        <th *ngFor="let header of headers">{{ header }}</th>
      </tr>
    </thead>
    <tbody>
      <!-- Filas de datos -->
      <tr *ngFor="let row of paginatedData; let i = index">
        <td *ngFor="let column of row; let colIndex = index">
          <!-- Columna normal -->
          <ng-container *ngIf="!isObject(column)">
            {{ column }}
          </ng-container>

          <!-- Columna de estado con switch -->
          <ng-container *ngIf="isStatusColumn(column)">
            <label class="switch">
              <input 
                type="checkbox" 
                [checked]="column.status"
                (change)="onStatusToggle(column.id, column.status)"
              >
              <span class="slider"></span>
            </label>
          </ng-container>

          <!-- Columna de acciones -->
          <ng-container *ngIf="isActionsColumn(column)">
            <div class="action-buttons">
              <button 
                class="action-btn view-btn" 
                (click)="onAction('view', column.product)"
                title="Ver detalles"
              >
                <ng-icon name="lucideEye" size="18"></ng-icon>
              </button>
              <button 
                class="action-btn edit-btn" 
                (click)="onAction('edit', column.product)"
                title="Editar"
              >
                <ng-icon name="lucideEdit" size="18"></ng-icon>
              </button>
              <button 
                class="action-btn delete-btn" 
                (click)="onAction('delete', column.product)"
                title="Eliminar"
              >
                <ng-icon name="lucideTrash2" size="18"></ng-icon>
              </button>
            </div>
          </ng-container>
        </td>
      </tr>

      <!-- Estado vacío -->
      <tr *ngIf="paginatedData.length === 0 && !isLoading" class="empty-state">
        <td [attr.colspan]="headers.length">
          No hay datos disponibles
        </td>
      </tr>

      <!-- Estado loading -->
      <tr *ngIf="isLoading" class="loading-state">
        <td [attr.colspan]="headers.length">
          <div class="loading-spinner"></div>
          Cargando datos...
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <div class="pagination-left">
      <button (click)="goToPreviousPage()" [disabled]="currentPage === 1">
        Anterior
      </button>
      <button (click)="goToNextPage()" [disabled]="currentPage === totalPages">
        Siguiente
      </button>
    </div>
    <div class="pagination-right">
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <select [(ngModel)]="rowsPerPage" (change)="updatePagination()">
        <option *ngFor="let option of rowsPerPageOptions" [value]="option">
          {{ option }}
        </option>
      </select>
    </div>
  </div>
</div>