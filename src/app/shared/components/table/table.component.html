<div class="table-container">
  <table class="table">
    <thead>
      <tr>
        <th *ngFor="let header of headers">{{ header }}</th>
      </tr>
    </thead>
    <tbody>
      <!-- Filas de datos -->
      <tr *ngFor="let row of paginatedData; trackBy: trackByRow">
        <td *ngFor="let cell of row">
          <!-- Celda normal -->
          <ng-container *ngIf="!(isStatusCell(cell) || isActionCell(cell))">
            {{ cell }}
          </ng-container>

          <!-- Celda de estado -->
          <ng-container *ngIf="isStatusCell(cell)">
            <label class="switch">
              <input 
                type="checkbox" 
                [checked]="cell.status"
                (change)="onStatusToggle(cell.id, cell.status)"
              >
              <span class="slider"></span>
            </label>
          </ng-container>

          <!-- Celda de acciones -->
          <ng-container *ngIf="isActionCell(cell)">
            <div class="action-buttons">
              <button class="action-btn view-btn" (click)="onAction('view', cell.product)" title="Ver detalles">
                <ng-icon name="lucideEye" size="18"></ng-icon>
              </button>
              <button class="action-btn edit-btn" (click)="onAction('edit', cell.product)" title="Editar">
                <ng-icon name="lucideEdit" size="18"></ng-icon>
              </button>
              <button class="action-btn delete-btn" (click)="onAction('delete', cell.product)" title="Eliminar">
                <ng-icon name="lucideTrash2" size="18"></ng-icon>
              </button>
            </div>
          </ng-container>
        </td>
      </tr>

      <!-- Estado vacío -->
      <tr *ngIf="paginatedData.length === 0 && !isLoading" class="empty-state">
        <td [attr.colspan]="headers.length">
          No hay datos disponibles
        </td>
      </tr>

      <!-- Estado loading -->
      <tr *ngIf="isLoading" class="loading-state">
        <td [attr.colspan]="headers.length">
          <div class="loading-spinner"></div>
          Cargando datos...
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <div class="pagination-left">
      <button (click)="goToPreviousPage()" [disabled]="currentPage === 1">
        Anterior
      </button>
      <button (click)="goToNextPage()" [disabled]="currentPage === totalPages">
        Siguiente
      </button>
    </div>
    <div class="pagination-right">
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <select [(ngModel)]="rowsPerPage">
        <option *ngFor="let option of rowsPerPageOptions" [value]="option">
          {{ option }}
        </option>
      </select>
    </div>
  </div>
</div>